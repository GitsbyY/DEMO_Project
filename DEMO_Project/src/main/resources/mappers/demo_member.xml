<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.member">
	<resultMap type="memberDto" id="memberResultMap">
		<id column="MEMBER_NO" property="mno" />
		<result column="MEMBER_ID" property="id" />
		<result column="MEMBER_PASSWORD" property="password" />
		<result column="MEMBER_NAME" property="name" />
		<result column="MEMBER_NICKNAME" property="nickName" />
		<result column="MEMBER_BIRTH_DATE" property="birthDate"
			javaType="java.util.Date" />
		<result column="MEMBER_PHONE" property="Phone" />
		<result column="MEMBER_EMAIL" property="email" />
		<result column="MEMBER_ADDRESS" property="address" />
		<result column="MEMBER_JOIN_DATE" property="joinDate"
			javaType="java.util.Date" />
		<result column="MEMBER_EMONEY" property="emoney" />
		<result column="MEMBER_POINT" property="point" />
		<result column="MEMBER_MOD_DATE" property="modDate" 
			javaType="java.util.Date" />
	</resultMap>
	
	<resultMap type="petDto" id="petResultMap">
		<id column="PET_NO" property="pno" />
		<result column="MEMBER_NO" property="mno" />
		<result column="PET_NAME" property="name" />
		<result column="PET_BREED" property="breed" />
		<result column="PET_GENDER" property="gender" />
		<result column="PET_WEIGHT" property="weight" />
		<result column="PET_ADOPTION_DATE" property="adoptDate"
			javaType="java.util.Date" />
		<result column="PET_VACCINATION" property="vac" />
		<result column="PET_VACCINATION_DATE" property="vacDate"
			javaType="java.util.Date" />
	</resultMap>
	
	<resultMap type="chargeDto" id="chargeResultMap">
		<id column="MEMBER_CHARGE_NO" property="mcno" />
		<result column="MEMBER_NO" property="mno" />
		<result column="MEMBER_CHARGE_AMOUNT" property="mcAmount" />
		<result column="MEMBER_CHARGE_DATE" property="mcDate"
			javaType="java.util.Date" />
	</resultMap>
	
	<insert id="memberInsertOne" parameterType="memberDto"
		useGeneratedKeys="true" keyProperty="no">
		<selectKey keyProperty="no" resultType="int" order="BEFORE">
			SELECT MEMBER_NO_SEQ.NEXTVAL
			FROM DUAL
		</selectKey>
		
		INSERT INTO MEMBER
		(MEMBER_NO, MEMBER_ID, MEMBER_PASSWORD, MEMBER_NAME, MEMBER_NICKNAME,
		    MEMBER_BIRTH_DATE, MEMBER_PHONE, MEMBER_EMAIL, MEMBER_ADDRESS, 
		    MEMBER_JOIN_DATE, MEMBER_EMONEY, MEMBER_POINT, MEMBER_MOD_DATE)
		VALUES(#{no}, #{id}, #{password}, #{name}, #{nickName},
		    #{birthDate}, #{Phone}, #{email}, #{address}, 
		    SYSDATE, 0, 0, SYSDATE)
		
	</insert>
	
	<insert id="petInsertOne" parameterType="petDto"
		useGeneratedKeys="true" keyProperty="no"> <!-- 키 값을 생성하는데 사용한다. -->
		<selectKey keyProperty="no" resultType="int" order="BEFORE">
			SELECT PET_NO_SEQ.NEXTVAL
			FROM DUAL
		</selectKey>
		
		INSERT INTO PET
		(PET_NO, MEMBER_NO, PET_NAME, PET_BREED, PET_GENDER, PET_WEIGHT
		, PET_ADOPTION_DATE, PET_VACCINATION, PET_VACCINATION_DATE)
		VALUES(#{no}, #{mno}, #{name}, #{breed}, #{gender},
			#{adoptDate}, #{vac}, #{vacDate})
		
	</insert>
	
</mapper>



